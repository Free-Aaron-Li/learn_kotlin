# 运算符

> 练习：[operator.kt](https://github.com/Free-Aaron-Li/learn_kotlin/blob/master/Part1/src/com/operator.kt)

Kotlin中的运算符（操作符）与C、C++、Java等语言十分相似，如果学习过其他现代语言，那么对Kotlin中的运算符应该很熟悉。

Kotlin主要的运算符包括：算术运算符、关系运算符、位运算符以及其他运算符。

## 算术运算符

其主要用来组织数值类型数据的算术运算，根据参加运算的操作数不同分为`一元运算符`和`二元运算符`

### 一元运算符

| 运算符 |  解释  | 
|:---:|:----:|
|  -  | 取反符号 | 
| ++  | 自加一  |
| --  | 自减一  |

### 二元运算符

| 运算符 | 解释 |
|:---:|:--:|
|  +  | 加  |
|  -  | 减  |
|  *  | 乘  |
|  /  | 除  |
|  %  | 取余 |

### 算术赋值运算符

| 运算符 |  解释  |
|:---:|:----:|
| +=  | 加赋值  |
| -=  | 减赋值  |
| *=  | 乘赋值  |
| /=  | 除赋值  |
|  %  | 取余赋值 |

## 关系运算符

关系运算符用于计较两个表达式大小关系的运算，其结果为布尔类型。

| 运算符 |  解释   |
|:---:|:-----:|
| ==  |  等于   |
| !=  |  不等于  |
|  >  |  大于   |
|  <  |  小于   |
| >=  | 大于或等于 |
| <=  | 小于或等于 |
| === | 引用等于  |
| !== | 引用不等于 |

> 引用等于和引用不等于，其用于引用类型比较，比较两个引用是否是同一个对象

## 逻辑运算符

| 运算符  | 解释  |
|:----:|:---:|
|  !   | 逻辑非 |
|  &&  | 逻辑与 |
| \|\| | 逻辑或 |

> 需要注意到短路情况

## 位运算

位运算其对二进制位进行操纵，操纵数和结果都是整型。

与C++、Java不同的是，其位运算并没有采用+、-等运算符，而是采用函数形式（或者中缀运算符）方式。

| 运算符  |  解释   |
|:----:|:-----:|
| inv  |  位反   |
| and  |  位与   |
|  or  |  位或   |
| xor  |  位异或  |
| shr  | 有符号右移 |
| shl  |  左移   |
| ushr | 无符号右移 |

> 除了位反inv必须采用函数形式表示外，其他位运算符均可采用中缀运算符方式，如：
> ```kotlin
> var a=1
> val b=2
> a.inv() // 位反
> a and b // 位与，也可以采用：a.and(b)方式
> a.shr b // 有符号右移，也可以采用：a.shr(b)方式
> ```

需要注意：无符号右移运算符仅被允许用在Int和Long整数类型，如果用于Short或Byte类型，则数据将会被转换成Int后再进行位移计算。

> 在英语中，常常将`True Form`或者`Sign-Magnitude`翻译位原码，
>
> 将`1’s Complement Code`翻译位反码
>
> 将`2’s Complement Code`翻译为补码

## 其他运算符

1. :，冒号。用于变量或常量类型声明，以及声明继承父类和实现接口
2. ()，小括号。起到改变表达式运算顺序的作用，其优先级最高
3. []，中括号。索引访问运算符
4. .，引用号。调用函数或属性运算符
5. =，赋值号。赋值
6. ?，可空符。表示一个可空类型
7. ?.，安全调用运算符。调用非空类型的函数或属性
8. ?:，Elvis运算符。空值合并运算符
9. !!，非空断言。断言可空表达式为非空
10. ::，双冒号。引用类、属性或函数
11. ..，区间。表示一个范围区间
12. ->，箭头。用来声明Lambda表达式
13. *，展开运算符。将数组传递给可变参数时使用

## 运算符优先级

|        运算符        |
|:-----------------:|
|        小括号        |
| 后缀运算符++ -- . ?. ? |
| 前缀运算符- + ++ -- !  |
|     : as as?      |
|       * / %       |
|        + -        |
|       区间..        |
|       中缀运算符       |
|        ?:         |
|   in !in is !is   |
|   \< \> \<= >=    |
|   == != === !==   |
|        &&         |
|       \|\|        |
| = += -= *= /= %=  |

> 注意，二元运算符计算顺序从左到右，但是优先级最低的算术赋值运算符从右到左运算
>
> 运算符优先级从高到低：算术运算符 -> 位运算符 -> 关系运算符 -> 逻辑运算符 -> 赋值运算符


